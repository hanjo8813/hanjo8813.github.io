---
title:  "디자인 패턴 찍먹해보기"
date: 2021-08-03
categories:
  - Java

# 고정값
classes: wide
toc: false
toc_sticky: false
---

23가지 디자인 패턴에 대해 정리해보자


<style>
  summary {
     cursor:pointer;
     color:rgb(15, 123, 108);
  }
  details {
    border: 1px solid rgb(230, 230, 230);
    padding:10px 20px 10px 20px;
  }
</style>


## 디자인 패턴이란?

- `ddd`

<br>

## 생성 패턴 (Creational Patterns)

<details>
  <summary><b>Factory Method</b></summary>

  <br>
  
  <h2>그게 뭐야 ❓</h2>

  <ul>
    <li>인터페이스를 사용해 객체를 생성할 때, 어떤 종류의 클래스(해당 인터페이스를 상속한)를 만들지는 서브 클래스에서 결정하게 하는 패턴</li>
    <li>메인 클래스에서는 팩토리 클래스로 어떤 객체의 선택을 위임한다.</li>
    <li>팩토리 클래스는 객체 생성을 대신 수행해주는 공장이라고 생각하면 된다.</li>
  </ul>

  <h2>클래스 다이어그램</h2>
  <img style='margin:20px' src="https://refactoring.guru/images/patterns/diagrams/factory-method/structure.png">
  <br>
  <ul>
    <li>대충 이렇게 생겼다고 한다. 예시를 통해 이해해보자</li>
  </ul>

  <h2>문제 상황</h2>
  
  <ul>
    <li>요즘엔 모든 로그인이 OAuth 로그인으로 이루어진다.</li>
    <li>따라서 현재 시스템에선 회원정보에 해당 회원이 어떤 사이트로 가입했었는지를 저장하고 있다.</li>
    <li>회원이 로그인하려할때, 어떤 사이트의 로그인 방식을 가져올지 팩토리 메소드로 구현해보자</li>
  </ul>


  <h2>시스템 구조</h2>

  <br>

  <img width="450" src="https://user-images.githubusercontent.com/71180414/128675506-e199e421-8c06-4115-aca2-78e0ba7e4365.png">

  <br><br>

  <img src="https://user-images.githubusercontent.com/71180414/128660471-199e5ba1-737d-4ea4-abe2-12b854abfce8.png">

  <ul>
    <li>로그인 종류는 Naver, Kakao 두 가지가 있고, 둘 다 Login 인터페이스를 상속받은 클래스로 구현됨.</li>
    <li>Main 클래스에서는 해당 회원이 어떤 사이트로 가입했는지 정보(Login Type)만을 Factory 클래스로 넘겨준다</li>
    <li>Factory 클래스에선 해당 정보에 맞는 로그인 방식(클래스)을 선택해 객체를 생성하여 Main에 리턴한다</li>
    <li>그럼 Main 클래스에선 정확히 어떻게 선택했는지, 뭐가 선택됐는지 알 필요 없이 리턴받은 인터페이스 객체를 사용하면 끝~</li>
  </ul>

  <h2>참고</h2>
  <ul>
    <li>https://refactoring.guru/design-patterns/factory-method</li>
    <li>https://niceman.tistory.com/143?category=940951</li>
  </ul>

</details>

<br>

<details>
  <summary><b>Abstract Factory</b></summary>
</details>

<br>

<details>
  <summary><b>Builder</b></summary>
</details>

<br>

<details>
  <summary><b>Prototype</b></summary>
</details>

<br>

<details>
  <summary><b>Singleton</b></summary>
</details>

<br>

## 구조 패턴 (Structural Patterns)

<details>
  <summary><b>Adapter</b></summary>

  <br>
  
  <h2>그게 뭐야 ❓</h2>

  <ul>
    <li>
      기존 시스템에서 사용하던 인터페이스가 있을 때, 호환되지 않는 새로운 인터페이스를 사용해야할 때 사용한다.<br>
      <span style='color:gray; font-style:italic'>ex) 220V 를 사용하는 한국에서 쓰던 기기들을 어댑터를 사용해 110V 를 쓰는곳에 가서도 그대로 쓸 수 있는 것처럼</span>
    </li>
    <li>호환을 위해 기존 인터페이스를 수정하지 않고 Adapter라는 클래스를 추가해 문제를 해결한다.</li>
  </ul>
  <img width='300' src="https://t1.daumcdn.net/cfile/tistory/991626385C32AB0506">

  <br>

  <h2>클래스 다이어그램</h2>
  <img style='margin:20px' src="https://refactoring.guru/images/patterns/diagrams/adapter/structure-object-adapter.png">
  <br>
  <ul>
    <li>이것만 보고는 무슨 소리인지 도통 모르겠다</li>
    <li>예시 코드를 만들어서 구조를 눈으로 직접 확인해보자.</li>
  </ul>

  <h2>문제 상황</h2>
  
  <ul>
    <li>음악 파일을 플레이시켜주는 시스템이 있다고 해보자~</li>
    <li>현재 시스템에서는 WAV 확장자 파일만을 플레이할 수 있는 플레이어밖에 없음</li>
    <li>이 시스템에서 MP3, MP4 등의 확장자 파일도 플레이할 수 있게 만드려고 한다</li>
    <li>Adapter 패턴을 적용하여 코드 수정없이 구현해보자!</li>
  </ul>

  <h2>기존 시스템</h2>

  <br>

  <img width='500' src="https://user-images.githubusercontent.com/71180414/128655048-80605de1-b393-4fa9-bf2c-aa26a74549f1.png">

  <br><br>

  <h2>변경 시스템</h2>

  <br>

  <img width="450" src="https://user-images.githubusercontent.com/71180414/128675649-02ce6275-9207-49d8-a227-721b3b0426c7.png">

  <br><br>

  <img src="https://user-images.githubusercontent.com/71180414/128655884-e7bcc90d-690d-4edc-9c86-60ca062a82c6.png">

  <ul>
    <li>추가하려는 확장자는 기존 시스템에서 사용하던 Player와 호환되지 않아(인터페이스가 다름) Adapter 클래스가 필요하다.</li>
    <li>따라서 기존 Player 인터페이스를 상속받는 Adapter 클래스를 만들고, <br>
    기존 play 메소드에 OtherPlyer 인터페이스를 사용하여 오버라이딩한다.</li>
    <li>이렇게 구현하면 Main 클래스에서 기존 player 객체만으로 WAV, MP3, MP4 모두 플레이가 가능하다.</li>
  </ul>

  <h2>참고</h2>
  <ul>
    <li>https://refactoring.guru/design-patterns/adapter</li>
    <li>https://niceman.tistory.com/141</li>
  </ul>

</details>

<br>

<details>
  <summary><b>Bridge</b></summary>
</details>

<br>

<details>
  <summary><b>Composite</b></summary>
</details>

<br>

<details>
  <summary><b>Decorator</b></summary>
</details>

<br>

<details>
  <summary><b>Facade</b></summary>
</details>

<br>

<details>
  <summary><b>Flyweight</b></summary>
</details>

<br>

<details>
  <summary><b>Proxy</b></summary>
</details>

<br>

## 행위 패턴(Behavioral Patterns)

<details>
  <summary><b>Chain of Responsibility</b></summary>
</details>

<br>

<details>
  <summary><b>Command</b></summary>
</details>

<br>

<details>
  <summary><b>Iterator</b></summary>
</details>

<br>

<details>
  <summary><b>Interpreter</b></summary>
</details>

<br>

<details>
  <summary><b>Mediator</b></summary>
</details>

<br>

<details>
  <summary><b>Memento</b></summary>

  <br>
  
  <h2>그게 뭐야 ❓</h2>

  <ul>
    <li>객체의 상태 정보를 저장하고 사용자의 필요에 의하여 원하는 시점의 데이터를 복원할 수 있는 패턴</li>
    <li>한마디로 객체지향의 <b>ctrl + Z</b> 기능이다 😬</li>
  </ul>

  <h2>클래스 다이어그램</h2>
  <img style='margin:20px' src="https://refactoring.guru/images/patterns/diagrams/memento/structure1.png">
  <br>
  <ul>
    <li>Originator는 원본, Memento는 복사본, CareTaker는 상태 추적 클래스이다.</li>
    <li>실제로 어떻게 구현하는지 살펴보자</li>
  </ul>


  <h2>문제 상황</h2>
  
  <ul>
    <li>한 클래스에 데이터를 저장하고, 이 클래스의 모든 변경사항을 추적하는 시스템을 구현해야함</li>
    <li>사용자가 원하는 시점에서 복원을 선택하면 클래스의 이전 상태를 출력해줘야 함</li>
  </ul>

  <h2>시스템 구조</h2>

  <br>

  <img width="500" src="https://user-images.githubusercontent.com/71180414/128675120-aeb5813f-74ac-4871-9b6f-f5a42b30d0ba.png">

  <br><br>

  <img src="https://user-images.githubusercontent.com/71180414/128677000-c57c37f1-7c02-4dc7-ac95-87fe2e39f6c9.png">

  <ul>
    <li>Main : 원본 클래스를 생성하고 CareTaker를 사용해 복사본의 상태를 관리한다. </li>
    <li>Orginator : 데이터를 담는 원본 클래스이며, 복사본(Memento)을 만들거나 저장하는 메소드를 가진다.</li>
    <li>Memento : 원본과 같은 구조를 가지는 복사본 클래스.</li>
    <li>CareTaker : 스택 구조를 활용해 복사본을 쌓는다. (선입선출이므로 복원 시 바로 전 복사본을 pop하게 됨)</li>
    <li>Orginator에 의해서만 복사본을 생성/복원할 수 있으므로 캡슐화를 지키는 것!</li>
  </ul>


  <h2>참고</h2>
  <ul>
    <li>https://lktprogrammer.tistory.com/65</li>
    <li>https://sticky32.tistory.com/entry/%EB%94%94%EC%9E%90%EC%9D%B8%ED%8C%A8%ED%84%B4-%EB%A9%94%EB%A9%98%ED%86%A0-%ED%8C%A8%ED%84%B4Memento-Pattern#context</li>
  </ul>

</details>

<br>

<details>
  <summary><b>Observer</b></summary>
</details>

<br>

<details>
  <summary><b>State</b></summary>
</details>

<br>
<details>
  <summary><b>Strategy</b></summary>
</details>

<br>
<details>
  <summary><b>Template Method</b></summary>
</details>

<br>
<details>
  <summary><b>Visitor</b></summary>
</details>
