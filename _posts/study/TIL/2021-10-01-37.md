---
title:  "[데브코스] "
date: 2021-10-01
categories: 
  - TIL

# 고정값
classes: wide
toc: false
toc_sticky: false
---

W8D5 -





## Test MockMvc 

- Endpoint(컨트롤러) 테스트할 때 요청/응답 테스트를 쉽게 할 수 있도록 해주는 모듈
- `mockito` 모듈이나 `restdocs` 모듈을 의존성에 추가하여 사용할 수 있다.

<div class="sub_title">ex) 테스트 클래스</div>

```java
@AutoConfigureMockMvc
class TestClass {

    @Autowired
    private MockMvc mockMvc;

    @Autowired
    ObjectMapper objectMapper;

    @Test
    void testMethod() {
        // POST
        mockMvc.perform(post("/URL")
                        .contentType(MediaType.APPLICATION_JSON)
                        .content(objectMapper.writeValueAsString(post로 넘어오는 값)))
                .andExpect(status().isOk())
                .andDo(print());

        // GET
        mockMvc.perform(get("/URL/{pathVal}", pathVal)
                        .param("파라미터명", 파라미터 값)
                        .contentType(MediaType.APPLICATION_JSON)
                .andExpect(status().isOk())
                .andDo(print());
    }
}
```

- `@AutoConfigureMockMvc` : 테스트 클래스에 해당 어노테이션을 달아줘야함
- `MockMvc` : Bean으로 띄워서 사용
- `ObjectMapper` : 메시지컨버터 역할 해준다고 생각하믄 됨
- `perform`으로 요청 만들어서 보내고 -> `andExpect`에서 받고 검증 -> `andDo`로 출력