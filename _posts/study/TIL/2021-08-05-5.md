---
title:  "[데브코스] Collection 이야기 "
date: 2021-08-05
categories:
  - TIL

# 고정값
classes: wide
toc: false
toc_sticky: false
---

우리가 자주 쓰는 Collection에 대해 깊게 파보자!


## Collection

- 여러 데이터구조의 묶음.
- 기본적으로 추상체이며, 구상체로 구현되어 있음


### 메소드 체이닝

```java
```

### getter? 쓰지마라

```java
```

<br>

## Iterator

- 여러 데이터 묶음을 풀어서 하나씩 처리할 수 있는 수단 제공
- next()를 통해 자료구조 안의 데이터를 하나하나 조회(역으로 조회는 불가능함)
- forEach 까지는 제공 X


```java
```

<br>

## Stream

- Java 8이상부터 컬렉션 스트림 사용가능
- 데이터의 연속이라고 생각하면 된다. 
- 고차함수들을 가진다. (람다?를 파라미터로 받는 함수)
- 컬렉션들은 모두 스트림 변환 메소드를 가지고 있어 객체 Type을 스트림으로 변환 가능 `.stream()`

```java
```

### Stream 메소드 정리

- 예전에 학교에서 수강한 데이터분석에서 스트림 메소드를 정리했었는데, 이게 또 나올줄이야.... 😫
- 다시보니 나름 잘 정리한것 같아서 앞으로 참고하자 -> [Repo 링크](https://github.com/hanjo8813/DataAnalysis_2020/tree/master/f2_stream)

### Stream 만들기

- generate
- iterate


```java
```

<br>

## Type의 이해

- Type 종류는 크게 세가지가 있다.
  - `Primitive Type` : int, char 등등..
  - `Reference Type` : 컬렉션 객체
  - `Wrapper Type` : IntStream 등등 스트림전용 타입
- 스트림도 객체이므로 Primitive Type은 type 지정이 불가하다.
- Primitive Type을 스트림으로 만드는 경우엔 별도의 스트림 객체가 만들어진다

### Stream에서의 타입 변환

- reference -> primitive 타입 변환은 map 메소드를 사용해도 되지만 `boxed` 메소드로도 가능

```java
IntStream s = Arrays.stream(new int[]{1,2,3});
// int -> Integer :  primitive 타입을 wrapper 타입으로 박싱하여 반환한다.
s.boxed()
```

- primitive -> reference 타입 변환은 `mapToXXX` 메소드로 가능

```java
// int -> IntStream
IntStream a = Stream.generate(() -> 1)
                .limit(5)
                .mapToInt(i -> i);
```

- 컬렉션 -> 컬렉션 변경은 collect 메소드로 가능

```java
```

<br>

## Optional

- NPE(Null Pointer Exception) : 자바에서는 모든게 레퍼런스 -> 모든것이 null이 될 수 있다.
- 따라서 항상 null을 확인할 필요가 있어 매우 귀찮음.. 
- 이제  null을 쓰지 않기로 계약하자!! (하지만 초기화할땐 어떡하지?)

### EMPTY 객체 사용하기

- 클래스를 생성할때 그 클래스에 초기값 객체를 미리 전역으로 생성해 해놓는다.
- Null인지를 확인하지 않고 초기값 객체인지를 본다

```java
public class User {
    // 초기화를 위한 객체를 미리 만들어 놓는다.
    public static User EMPTY = new User(0, "");
    ...
```

```java
// 객체 생성할때 초기값 객체를 가져옴
User user = User.EMPTY;
// Null 확인이 아닌, 객체를 확인
if(user == User.EMPTY){
    ...
}
```

- 하지만 정해진 규칙없이 임의로 만드는것이기 때문에 모두가 규칙을 알기 힘들다. 


### Optional 사용하기

- 모두가 알 수 있는 명확한 사용법
- Null 사용을 방지하면서 값이 실제로 들어있는지 확인하기 위한 컬렉션

```java
Optional<User> optionalUser = Optional.empty();
optionalUser = Optional.of(new User(1, ""));
// 값이 없다면 true
optionalUser.isEmpty();
// 값이 있다면 true
optionalUser.isPresent();
// 값 유무에따라 조건 실행
optionalUser.ifPresentOrElse(
                // 있다면 (Consumer)
                user -> { },
                // 없다면 (Runnable)
                () -> { }
        );
```


<br>